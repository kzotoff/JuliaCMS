$(function() {	$('#button_add').click(function() { editMenuItem(-1, $('#current_menu_id').val()); });	$('.admin_menu_tree li').each(function(index, element) {		var id = $(this).attr('id').replace(/menu_\d+_/, '');				// at-row smallbar		$(this).find('.menu_sb_btn_moveup').click(function(event) { location.href = './?module=menu&id='+id+'&action=moveup'; event.stopPropagation(); });		$(this).find('.menu_sb_btn_movedown').click(function(event) { location.href = './?module=menu&id='+id+'&action=movedown'; event.stopPropagation(); });		$(this).find('.menu_sb_btn_edit').click(function(event) { editMenuItem(id, $('#menu_selector').val()); event.stopPropagation(); });		$(this).find('.menu_sb_btn_delete').click(function(event) { deleteMenuItem(id); event.stopPropagation(); });		// just click at the item to edit		$(this).click(function() { editMenuItem(id, $('#menu_selector').val()); });			});});// calls edit form for menu item// NOTE: menuID is required here as we can't get it from database for the new elementfunction editMenuItem(id, menuID) {	backgroundLock();	$.get('./?ajaxproxy=menu&module=menu&action=edit_elem&menu_id='+menuID+'&id='+id)		.success(function(result) {			$('<div id="edit_dialog"></div>')				.html(result)				.dialog({					title: (id < 0 ? 'New element' : 'Element properties'),					modal: true,					width: '70rem',					close: function() {						$('#edit_dialog').remove();						backgroundRelease();					}				});		});};deleteMenuItem = function(id) {	if (confirm('really delete?')) {		location.href = './?module=menu&id='+id+'&action=delete';	}}